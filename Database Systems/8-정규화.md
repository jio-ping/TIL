### 📌 갱신 이상

- 삽입 이상

: 레코드 추가 시 불 필요한 컬럼갑 없이는 추가하지 못하는 경우

- 삭제 이상

: 삭제 시 의도하지 않았던 다른 데이터가 삭제되는 경우

- 수정 이상

: 일부 레코드 수정 시 데이터의 일관성이 훼손되는 경우

### 📌 함수적 종속성(FD: Functional Dependency)

: 임의의 릴레이션 스키마 R의 인스턴스 r(R)에 포함되는 서로 다른 두 레코드 r<sub>1</sub>, r<sub>2</sub>가 컬럼 집합 X와 Y에 대해 r<sub>1</sub>[X] = r<sub>2</sub>[X]일 때 r<sub>1</sub>[Y] = r<sub>2</sub>[Y]이면 함수적 종속성 X -> Y가 성립 </br>
➡️ 릴레이션 인스턴스를 분석하여 속성들 간의 연관관계를 표현한 것

| 선수ID | 선수이름 | 팀명         | 홈런 | 팀 순위 |
| ------ | -------- | ------------ | ---- | ------- |
| P01    | 문현빈   | 한화이글스   | 4    | 2       |
| P02    | 위즈덤   | 기아타이거즈 | 9    | 7       |
| P03    | 디아즈   | 삼성라이온즈 | 11   | 3       |
| P04    | 노시환   | 한화이글스   | 9    | 2       |

- 선수 ID -> {선수 이름, 팀 명} : 선수 ID 결정되면 팀도 유일하게 정해짐 (함수적 종속성 성립)
- 팀명 -> 팀 순위 : 팀명 컬럼이 같으면 현재 팀 순위는 같음 </br>
- 팀명 -> 홈런 ❌: 같은 팀이라고 해서 홈런 수가 같진 않음 </br>
  ➡️ 결정자가 같으면 종속자도 같음, 종속자가 같다해서 결정자가 같아야 하는건 ❌

#### 📎 클로저(closure)

: 판별된 함수적 종속성 집합으로부터 유추할 수 있는 모든 합수적 종속성 집합 </br>
➡️ 판별된 종속성 외에 논리적으로 확장된 함수적 종속성 집합</br>
ex) 선수 ID -> {선수 이름, 팀 명}

#### 📎 함수적 종속성 추론 규칙(암스트롱 공리,Armstrong's axiom)

1. 재귀성 규칙 : X ⊇ Y $ X → Y 이다.</br>
   : 어떤 컬럼의 도메인이 다른 컬럼의 도메인보다 큰 집합이면 포함된 컬럼이 된 컬럼을 종속함
2. 부가성 규칙 : X → Y 이면, XZ → YZ이다.</br>
   : 결정자와 종속자의 부가적으로 동일한 컬럼 덧붙였을때 종속관계 유지
3. 이행성 규칙 : X → Y이고, Y → Z 이면 X→Z 이다.</br>

4. 분해 규칙 : X → YZ 이면, X → Y이다.
5. 합집합 규칙 : X → Y 이고, X → Z 이면 X → YZ이다.
6. 의사 이행성 규칙 : X → Y 이고, WY → Z 이면, WX → Z 이다.

### 📌 카노니컬 커버

: 함수적 종속성 추론 규칙으로 확장된 클로저에는 자명한 종속성과 중복된 종속성을 포함. 불필요한 함수적 종속성을 제거한 표준형으로 변환 후 정규화를 수행</br>
➡️ 함수적 종속성 집합을 간결하고 중복없이 정리한 표준형 (중복제거, 정규화준비)

#### 📎 표준형 조건

1. F의 모든 함수적 종속성의 종속자의 속성은 반드시 1개</br>
   : 분해 (decompostion) - A → B, A → C 처럼 하나의 종속성에 오른쪽 속성은 하나만
2. F에서 X → A를 X의 진부분집합 Y에 대해 Y → A 로 교체했을때, 그 집합이 F와 동등한 집합이 불가능</br>
   : 좌측 최소화 - AB → C인데 A 만으로도 C가 결정할 수 있으면 A → C로 바꿔야함
3. F에서 어떤 함수적 종속성을 제거했을때, 그 집합이 F와 동등한 집합이 불가능</br>
   : 불필요한 종속성 제거 - A → B, B → C, A → C 이 중에서 A → C는 없어도 유도 가능 </br>

➡️ 어떤 종속성을 변경했거나 기존 종속성의 집합과 달라졌다는 의미는 반드시 필요한, 포함해야하는 종속성 집합임

### 📌 함수적 종속성 다이어그램(FDD: Functional Dependency Diagram)

: 릴레이션 내의 속성간의 종속관계를 직관적이고 이해하기 쉽게 도식화한 표현 방식

- 직사각형 : 속성 또는 속성집합
- 화살표 : 함수적 종속성

## 정규화

: 특정 정규형의 조건을 만족하도록 릴레이션과 속성을 재구성하는 과정 </br>
➡️ 컬럼간 연관관계를 이용해 릴레이션의 비효율성 제거하고 내부에 있는 데이터 중복을 소화함

### 📌 정규화의 목적

- 데이터베이스 내에 모든 릴레이션을 효율적으로 표현
- 바람직하지 않은 삽입, 수정, 삭제 등의 이상 발생 방지
- 보다 간단한 관계연산에 기초해 검색 알고리즘을 효과적으로 작성할 수 있도록 지원
- 새로운 형태의 데이터가 삽입될 때, 릴레이션 재구성의 필요성을 축소

### 📌 제1정규형

: 릴레이션 스키마에서 정의된 모든 속성의 도메인이 원자값을 갖는 상태 </br>
➡️ 관계형 모델의 특성을 만족하는 경우, 자동 적용되는 정규형

<details><summary>example</summary>

| 팀명       | 선수                 |
| ---------- | -------------------- |
| 한화이글스 | 문동주,심우준,안치홍 |

➡️ 제 1 정규형을 만족하지 못함</br>
| 팀명 | 선수 |
| ---------- | -------------------- |
| 한화이글스 | 문동주 |
➡️ 제 1 정규형을 만족</br>

</details>

### 📌 제2정규형

:주어진 릴레이션의 인스턴스가 기본키가 아닌 속성(비주속성)이 기본키(주속성)에 완전히 종속되어 있는 상태 </br>
릴레이션이 제 1정규형을 만족하고 기본키의 부분집합이 특정 속성을 종속하고 있지 않은 상태</br>

- X → Y 에 대한 함수 종속 관게

1. 부분 함수 종속 : Y가 X의 전체가 아닌 일부분에 종속
2. 완전 함수 종속 : Y가 X의 전체에 종속</br>
➡️ 제 2정규형부터 함수적 종속성 고려 필요
<details><summary>example</summary>

- 팀 테이블
  | 팀ID | 팀명 |
  | ---- | ---------- |
  | T01 | 한화이글스 |

- 선수 테이블
  | 선수ID | 선수명 |
  | ------ | -------- |
  | P01 | 문동주 |
  | P02 | 심우준 |
  | P03 | 안치홍 |

- 소속 관계 테이블
  | 팀ID | 선수ID |
  | ---- | ------ |
  | T01 | P01 |
  | T01 | P02 |
  | T01 | P03 |

</details>

### 📌 제3정규형

:릴레이션이 제 2 정규형을 만족하고 , 기본키가 아닌 속성들이 어떤 키에도 이행적으로 종속되지 않은 상태 </br>

- 이행적 종속성 : X → Y이고 Y → Z 이면 X → Z 이다.

### 📌 BCNF 정규형

: 릴레이션이 제 3규형을 만족하고, 릴레이션에 성립하는 X → Y 형태의 모든 함수적 조속성에 대해 X 가 슈퍼키인 상태

### 📌 역정규화

: 정규화의 반대과정</br>

- 정규화를 통해 분리되었던 릴레이션을 통합하는 재조정을 수행하고 정보의 부분적 중복을 허용하는 기법
- 데이터 접근 성능 개선 목적 </br>
  ➡️ 정규화 되지 않은 스키마와 역정규화 스키마는 구별 (결과물이 때론 동일할 수 있으나 다른 개념 )

### 📌 릴레이션의 무손실 분해

: 스키마 R에 함수적 종속성 X → Y가 존재하고 X ∩ Y = ∅ 이면, R을 R-Y와 XY로 분해</br>
➡️ 데이터베이스 정규화에서 원래 릴레이션을 분해하더라도, 다시 조인했을 때 원래의 릴레이션과 완전히 동일하게 복원할 수 있는 분해
